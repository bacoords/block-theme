@use "../abstracts/props.scss";
@use "../utilities/visually-hidden.scss" as *;
@use "../abstracts/breakpoint-mixin" as *;

/// Accessible pseudo checkboxes with a focus state
input[type="checkbox"] {
	position: absolute;
	margin: 0 !important;
	padding: 0 !important;
	opacity: 0;
	height: 0;
	width: 0;
	pointer-events: none;
	& + label {
		position: relative;
		cursor: pointer;
		display: flex;
		line-height: 1.6;
		&::before {
			content: "";
			flex-shrink: 0;
			top: calc((1em * 1.6 - 20px) / 2);
			position: relative;
			display: inline-block;
			margin-right: 10px;
			width: 20px;
			height: 20px;
			background: transparent;
			border-radius: props.custom("border", "radius");
			border-color: props.custom("border", "color");
			border-style: props.custom("border", "style");
			border-width: props.custom("border", "width");
		}
	}
	&:checked {
		& + label {
			&::before {
				background: props.custom("border", "color");
			}
			&::after {
				content: "";
				position: absolute;
				top: 10px;
				left: 4px;
				border-left: props.custom("border", "width") solid
					props.preset("color", "background");
				border-bottom: props.custom("border", "width") solid
					props.preset("color", "background");
				height: 6px;
				width: 13px;
				transform: rotate(-45deg);
			}
		}
	}
	&:focus,
	&:focus-visible {
		& + label {
			&:before {
				outline: props.preset("color", "background") solid
					props.custom("border", "width");
				box-shadow: 1px 1px 8px props.preset("color", "secondary");
			}
		}
	}
	&:disabled {
		& + label {
			&::before {
				@supports (-webkit-backdrop-filter: none) or (backdrop-filter: none) {
					backdrop-filter: brightness(0.95);
				}
				border-color: transparent;
			}
		}
	}
}
