@use "../utils/flow.scss" as *;
@use "../utils";
@use "sass:color";

#comments {
	@include utils.padding();
	max-width: utils.ref("custom.contentSizes.wide");
	@include mixins.margin-x(auto);
	@extend .flow;
	.comments-title {
		text-align: center;
	}
	small {
		display: block;
	}
	.comment-list {
		@extend .flow;
		list-style: none;
		padding: 0;
		.children {
			@extend .flow;
			list-style: none;
			.children {
				ol {
					padding: 0;
				}
			}
		}
		.comment {
			@extend .flow;
			// threaded reply form should have the same background as a comment block
			#respond,
			.comment-body {
				@supports (-webkit-backdrop-filter: none) or (backdrop-filter: none) {
					// backdrop-filter: brightness(0.95);
				}
			}
			#respond {
				border-radius: var(--wp--custom--border--radius);
				border-radius: utils.ref("custom.border.radius");
				border-color: utils.ref("custom.border.color");
				border-style: utils.ref("custom.border.style");
				border-width: utils.ref("custom.border.width");
				@include utils.padding();
			}
			.comment-body {
				border-radius: var(--wp--custom--border--radius);
				border-radius: utils.ref("custom.border.radius");
				border-color: utils.ref("custom.border.color");
				border-style: utils.ref("custom.border.style");
				border-width: utils.ref("custom.border.width");
				@include utils.padding();
				.comment-meta {
					display: flex;
					flex-direction: column;
					justify-content: space-between;
					flex-wrap: wrap;
					margin-bottom: 1rem;
					gap: 0.5rem;
					@include utils.breakpoint(md) {
						flex-direction: row;
					}

					.comment-author {
						display: flex;
						gap: 0.5rem;
						order: 1;
						@include utils.breakpoint(md) {
							order: 0;
						}
					}
					.comment-metadata {
						font-size: utils.ref("preset.fontSize.small");
					}
				}
			}
		}
	}

	/// Comment Form
	#respond {
		.required-field-message {
			display: block;
			font-size: utils.ref("preset.fontSize.small");
			margin-top: utils.ref("preset.spacing.sm");
		}
		form {
			@extend .flow;
			p {
				display: flex;
				flex-direction: column;
				@extend .flow;
				& > * {
					--wp--style--block-gap: 0.5rem;
				}
				&.comment-form-cookies-consent {
					flex-direction: row;
					align-items: baseline;
					gap: 0.5rem;
					& > * + * {
						margin-top: 0;
					}
				}
				&.form-submit {
					// don't make the submit button full width
					display: block;
				}
				&.logged-in-as {
					display: block;
					margin-top: utils.ref("preset.spacing.sm");
				}
			}
			.comment-notes {
				font-size: utils.ref("preset.fontSize.small");
				margin-top: utils.ref("style.blockGap");
			}
		}
	}
}
